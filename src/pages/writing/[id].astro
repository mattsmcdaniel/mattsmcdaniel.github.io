---
import { getCollection, render } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
  const posts = await getCollection("writing");
  return posts.map((post) => ({
    params: { id: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
const formattedPubDate = post.data.pubDate.toLocaleDateString("en-US", {
  year: "numeric",
  month: "long",
  day: "numeric",
});
---

<BaseLayout title={post.data.title}>
  <div class="container">
    <nav class="breadcrumb">
      <ol>
        <li><a href="/">mattmcdaniel.dev</a></li>
        <li><a href="/writing">Writing</a></li>
        <li><span aria-current="page">{post.data.title}</span></li>
      </ol>
    </nav>
    <article>
      <h1>{post.data.title}</h1>
      <p>{formattedPubDate}</p>
      <div class="article-body">
        <Content />
      </div>
    </article>
    <footer class="site-footer">
      <p>&copy; 2025 Matt McDaniel</p>
    </footer>
  </div>
  <style>
    .container {
      padding: 2em 1em;
    }

    .site-footer {
      margin-top: 4em;
    }

    .breadcrumb {
      line-height: 1.5;
    }

    .breadcrumb ol {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    .breadcrumb li:not(:last-child)::after {
      display: inline;
      content: "/";
      margin-left: 0.5em;
      margin-right: 0.25em;
    }

    article {
      max-width: 90ex;
    }

    article :global(p) {
      line-height: 1.5;
    }

    article :global(h2),
    article :global(h3),
    article :global(h4),
    article :global(h5),
    article :global(h6) {
      font-weight: 700;
      line-height: 1.2;
      margin: 2rem 0 1rem;
    }

    article :global(h1) {
      font-family: "YoungSerifVF", serif;
      font-size: 4rem;
      font-weight: 100;
      letter-spacing: -0.0125em;
      line-height: 1;
      margin: 1em 0 0;
    }

    article :global(h2) {
      font-size: 2rem;
    }

    article :global(h3) {
      font-size: 1.5rem;
    }

    article :global(h4) {
      font-size: 1.5rem;
    }

    .article-body {
      margin-top: 2em;
      max-width: 66ex;
    }

    @media screen and (min-width: 30em) {
      .breadcrumb li {
        display: inline;
      }
    }

    @media screen and (min-width: 60em) {
      .container {
        padding-left: 2em;
        padding-right: 2em;
      }
    }
  </style>
</BaseLayout>
